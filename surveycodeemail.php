<?php
class SURVEY_CODES
{

	public function HandleCallback()
	{	
		$emails = array("anjasmomma@gmail.com", "Penn449@gmail.com", "swill153@rochester.rr.com", "neocalvinist@gmail.com", "Trek5@bellsouth.net", "tnj57@hotmail.com", "beckibbunch@suddenlink.net", "Brandiconder@hotmail.com", "dbraunling@aol.com", "jerry.challender@aa.com", "johnkuykendall77@yahoo.com", "Shaej1@yahoo.com", "floyd.nathaniel@gmail.com", "raincollazo@msn.com", "lauren@bigdaddybiscuits.com", "jill@bakehorn.net", "brocksteere@gmail.com", "briankemm@gmail.com", "m.podboreski@gmail.com", "Elowery84@yahoo.com", "misscarliechavers@gmail.com", "vrao2180@gmail.com", "Heatherhill33@mac.com", "arosenthal7462@gmail.com", "dbreger@gmail.com", "brendapthomas1@yahoo.com", "spider@webweaverwoman.com", "ninadeo@yahoo.com", "sarnold@pvschools.net", "snapphappy@gmail.com", "taylorpuffball@yahoo.com", "eva12.08@gmail.com", "e_w_y@yahoo.com", "amschisano@yahoo.com", "ali.jeffery@gmail.com", "kimmy@thefreelunchfriday.com", "cdimples@gmail.com");
		
		$cats = $this->GetCategories();
		foreach($emails as $email) {
			$code = $this->CommitCode($cats);
			if($code) {
				$this->SendEmail($code, $email);
				echo $email . ','. $code . "<br/>";
			} else {
				echo "Failed to send email for " . $email . "<br />";
			}
		}
	}
	
	private function GetCategories() {
		$cats = Array();
		$query = "SELECT categoryid as id FROM isc_categories WHERE
					catname NOT LIKE '%Watch of the Month Club%'";
		$result = $GLOBALS['ISC_CLASS_DB']->Query($query);
		while($row = $GLOBALS['ISC_CLASS_DB']->Fetch($result)) {
			$cats[] = $row['id'];
		}
		return $cats;
	}	
	
	private function GenCode($prefix = 'MWSURVEY') {
		$suffix = $this->getRandomString(4);
		$code = $prefix . $suffix;
		return $code;
	}
	
	private function CommitCode($cats, $amount = '20') {
		$code = $this->GenCode();
		
		// Make sure the code is unique, if not... try again.
		$query = "SELECT couponid FROM isc_coupons WHERE couponname LIKE '" . $code . "' LIMIT 1";
		$result = $GLOBALS['ISC_CLASS_DB']->Query($query);
		if($GLOBALS['ISC_CLASS_DB']->CountResult($result) > 0) {
			$code = $this->CommitCode($cats, $amount);
			return $code;
		}
	
		$query = "INSERT INTO isc_coupons (couponname, coupontype, couponamount, couponenabled, couponcode, couponmaxuses, couponappliesto)
				   VALUES ('" . $code . "', '2', '" . $amount . "', '1', '" . $code . "', '1', 'categories')";
		$result = $GLOBALS['ISC_CLASS_DB']->Query($query);
		
		if($result) {
			$coupid = $GLOBALS['ISC_CLASS_DB']->LastId();
			for($f=0;$f<count($cats);$f++) {
				$query2 = "INSERT INTO isc_coupon_values (couponid, valueid)
				VALUES ('" . $coupid . "', '" . $cats[$f] . "')";
				if(!$GLOBALS['ISC_CLASS_DB']->Query($query2)) {
					return false;
				}
			}
		}
		else {
			return false;
		}
		
		return $code;
	}
	
	private function SendEmail($code, $email) {
		$GLOBALS['EmailHeader'] = "$20 for Your Next Modify Watches Purchase";
		$GLOBALS['Code'] = $code;

		$emailTemplate = FetchEmailTemplateParser();
		$emailTemplate->SetTemplate("survey_email");
		$message = $emailTemplate->ParseTemplate(true);

		require_once(ISC_BASE_PATH . "/lib/email.php");
		$obj_email = GetEmailClass();
		$obj_email->Set('CharSet', GetConfig('CharacterSet'));
		$obj_email->From('michelle@modifywatches.com', GetConfig('StoreName'));
		$obj_email->Set("Subject", "$20 for Your Next Modify Watches Purchase");
		$obj_email->AddBody("html", $message);
		$obj_email->AddRecipient($email, "", "h");
		$email_result = $obj_email->Send();
	}

	private function getRandomString($length = 6) {
		$validCharacters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
		$validCharNumber = strlen($validCharacters);
	 
		$result = "";
	 
		for ($i = 0; $i < $length; $i++) {
			$index = mt_rand(0, $validCharNumber - 1);
			$result .= $validCharacters[$index];
		}
	 
		return $result;
	}

	public function fixShit() {
		$codes = Array("MODVZTR", "MODS2NN", "MODU5MH", "MODBEEG", "MOD0F1H", "MOD4VXC", "MODILJ3", "MODW44T", "MOD1IGL", "MODF5P1", "MODLEG3", "MODGKCD", "MODN9ZD", "MODQDLX", "MODUQXL", "MODW8YC", "MODFX9C", "MODEERG", "MODLWVF", "MOD3EOB", "MOD7Z9D", "MOD45LR", "MODM850", "MOD2JFN", "MODMWM6", "MODZKCD", "MODIXFC", "MODA41P", "MODR0UE", "MODNWU8", "MOD3QC2", "MODTFNA", "MODR7Q7", "MOD7GKR", "MODX4TA", "MODHMAS", "MODO7VB", "MODIZ0W", "MODLI4Z", "MOD19GX", "MOD9OGM", "MODJX4T", "MODD7HP", "MOD6CEX", "MOD99MP", "MODZI61", "MOD3XVW", "MODUHNN", "MOD4MC6", "MOD7WYI", "MOD8W3V", "MODOVOA", "MOD429Q", "MODGE8K", "MODDOKL", "MOD7I4X", "MOD8GPB", "MODBQBJ", "MODEZ9C", "MODU5HG", "MOD8A0K", "MODRPKJ", "MODB75J", "MODJXF5", "MOD18R4", "MODBDVN", "MOD0SZO", "MOD3SF9", "MODMYV1", "MODLL45", "MODSXNB", "MODJU2E", "MODQWOT", "MODNUHY", "MODWFWQ", "MOD8RPI", "MODPSTC", "MODRRB5", "MOD8Q0N", "MODKV15", "MODUQNN", "MODNKUS", "MODMF6E", "MODP1RS", "MOD8J0V", "MODU1XU", "MODQZ6X", "MODHQVH", "MOD3XRE", "MODEDZU", "MODXHYC", "MODQGSF", "MODTMEN", "MODWPO5", "MODGG8U", "MODQ423", "MODOYU4", "MODPN1G", "MOD6AGU", "MOD3AJ3", "MODDC7N", "MODD8KL", "MOD5HUY", "MOD31FX", "MODZ5CL", "MODNHMV", "MODS22K", "MODXBJE", "MODF6OO", "MODRYD2", "MODSRG2", "MODU5G8", "MODZYPW", "MOD20Z9", "MOD9102", "MOD9NUG", "MODH76U", "MODGVAG", "MODHVS0", "MOD3DU6", "MOD6JDM", "MODL8KD", "MODOKDB", "MODUW0H", "MODTIHW", "MODY6HN", "MODP59W", "MODSKM0", "MODZFUA", "MOD83QE", "MODJKUL", "MOD9A17", "MODOZKL", "MOD5VS4", "MOD0SA7", "MODM8LW", "MODYNXU", "MODUJBB", "MOD3USL", "MODXZ6X", "MODXRY8", "MODZ48O", "MODWA6B", "MODX236", "MODTQTN", "MOD1UU5", "MODW2F3", "MODWLRM", "MODJO1H", "MODELH0", "MOD0KPQ", "MOD4FSL", "MOD42QT", "MODFI6Y", "MODLL6M", "MOD6EDS", "MODY7RO", "MODHGF3", "MOD8P1C", "MODZIHG", "MODAD87", "MODS8Q9", "MODY2XW", "MOD2SHG", "MODEEI0", "MODS7F4", "MODUKBW", "MODH6UM", "MODVCSB", "MOD80LT", "MODUCL9", "MOD4AWI", "MODQZNL", "MOD2L4O", "MODXHP9", "MOD2TWD", "MODH9N5", "MODCSPN", "MODV1LG", "MODW9Q7", "MODCDHF", "MODGYX8", "MODR25G", "MODAI5F", "MODVYAM", "MODY31M", "MOD2MTP", "MOD8ND9", "MODVJAU", "MOD1EYO", "MOD0818", "MOD7LY0", "MODBZTQ", "MODSW01", "MODKIQ1", "MODDZSC", "MODKMQ1", "MOD15UN", "MODCH2T", "MODHJD5", "MODTGNB", "MODVQ10", "MODZKAO", "MODO0Z7", "MODZDSS", "MODY53X", "MODSV42", "MOD72SR", "MOD00YA", "MODUDTO", "MOD76LU", "MODP6AV", "MODZCUX", "MODM9F8", "MODN70W", "MOD4FUN", "MODSRIH", "MODZSUM", "MODRARN", "MOD8P8R", "MODJJ1L", "MOD68M3", "MODG720", "MODX7N3", "MODU5LC", "MODUYJF", "MOD5782", "MOD9XU5", "MODO6RD", "MOD51Y9", "MODMIUH", "MOD4K99", "MOD1AMY", "MOD9R69", "MODRE8V", "MODHG9P", "MOD7IJS", "MOD2RUJ", "MODEOFE", "MOD56VE", "MODAPOR", "MODSBT9", "MOD8W0T", "MODZ0DS", "MODXBOI", "MODYEAY", "MOD2UNW", "MODCHWX", "MODJPUC", "MODSMPB", "MODZBYM", "MODS94G", "MODRX3H", "MOD6GZB", "MODCALL", "MODQIGH", "MODVWQ1", "MODZVMF", "MODFJQQ", "MOD5XBS", "MODFM3W", "MOD4QBA", "MODXJ7O", "MODBM3M", "MOD957A", "MODQ8LW", "MODLAU0", "MOD6ZM3", "MODE00P", "MODH4K7", "MODTRHB", "MODZ2JF", "MODD9ZP", "MODCWAG", "MODXDA1", "MODC8GQ", "MOD8A9L", "MODZIV3", "MODK8P0", "MODLT03", "MODJMHA", "MODGC9N", "MODWJ20", "MOD6348", "MODRG6F", "MODSPTY", "MODPRIL", "MODF8BU", "MOD8QLS", "MODN41F", "MOD32T8", "MODXBAW", "MODN30J", "MODHWI5", "MODF12A", "MOD36D1", "MODC15U", "MODM4U8", "MODPTXC", "MODBUHQ", "MOD8Y5X", "MODTVEP", "MODILA4", "MODPQU4", "MODJAFP", "MOD610N", "MODQHG8", "MODEDQ9", "MODCGF8", "MODGLZW", "MODACMU", "MODL5S7", "MODMEZA", "MODCWTP", "MODD8N3", "MODM55H", "MODNSDW", "MODV7JS", "MODG84C", "MOD5USC", "MODMGI3", "MODGD0G", "MODHBUF", "MODLP4S", "MODTH1D", "MODP9K4", "MODTWJZ", "MODF8WR", "MODDCBA", "MOD6FAN", "MODMK8B", "MOD2ZA8", "MOD79F0", "MOD5YM6", "MODH3V0", "MODGNWO", "MODWBX6", "MOD5T6P", "MODZI6P", "MODCBGE", "MODN114", "MODRNRY", "MOD49F3", "MODGD2N", "MODGRAO", "MODIH0G", "MODXAVE", "MODZAG9", "MODEUKC", "MOD5YK1", "MODOIRW", "MODXNZ0", "MODZX4Q", "MODKO7I", "MOD8C83", "MOD9VXO", "MODVLD4", "MODZOBK", "MODVBXJ", "MODSQG5", "MODPQKI", "MODUUFC", "MOD48S6", "MOD41BG", "MODN0O8", "MODCIXR", "MODDFEB", "MODR8GW", "MODWCLN", "MOD1RUV", "MOD9MMV", "MODKST5", "MODEVM4", "MODJH6U", "MODQKX4", "MODCEZJ", "MOD03Y9", "MODGYFQ", "MODUAAZ", "MODVGO0", "MODD4PZ", "MODLZT3", "MODKYGB", "MODJV46", "MOD2RSU", "MODFQWI", "MODSLID", "MODNYNV", "MODROCP", "MODEQXB", "MODQMF6", "MODDQ7F", "MODKUJJ", "MODNR9V", "MOD7AZB", "MOD5MNE", "MODGAEC", "MODLKGB", "MODLMLN", "MODB3IW", "MOD3WK3", "MODR7E2", "MODBZ1N", "MODOKON", "MODP2FR", "MODO5AD", "MOD6M9R", "MODX1YT", "MODTOVI", "MODJMAC", "MOD5MTS", "MODPWG0", "MOD1H5Y", "MODRFI7", "MODTN3V", "MOD8767", "MOD8CI2", "MOD8JUU", "MODXBGB", "MOD9BA4", "MODKYAZ", "MODUSL8", "MODSFN5", "MODHI89", "MODPLNK", "MODA9YT", "MODTYMB", "MODAULG", "MOD27TN", "MODMSA9", "MOD8HRM", "MODH1E4", "MODAY3U", "MOD9Z0T", "MOD6Q2O", "MODDDV7", "MODKA9D", "MODVI9X", "MODU95G", "MODYKTS", "MODVS6T", "MODBVH9", "MODCWTT", "MODASMX", "MODNJNW", "MODDZJ9", "MODNVKF", "MODTATD", "MODZR51", "MOD7AQD", "MODVP0S", "MOD5TZQ", "MODBTSJ", "MODM77V", "MODDOYN", "MOD1KOE", "MODDUQG", "MODCNC1", "MODEMN9", "MODJZEP", "MOD2HAG", "MOD33HU", "MODZOO3", "MODRJQF", "MODSCIB", "MODQ912", "MOD3YO9", "MOD4GM9", "MODQE80", "MODKXW7", "MODRWL4", "MODBZMJ", "MOD5R8T", "MODQNNF", "MODJWBM", "MOD91C3", "MOD8D5Y", "MODY7HT", "MOD5SQP", "MOD26YU", "MODWZR4", "MODS6FQ", "MODM5UH", "MODFP5A", "MODM85V", "MODZ9DC", "MODSYR6", "MODHHLP", "MODIRA7", "MODLTOF", "MODLF14", "MODL8VO", "MODHK51", "MODUZXL", "MODID30", "MOD7QYW", "MODDNR3", "MOD50LP", "MODFZYY", "MODV9RL", "MODLKLE", "MOD305Z", "MODEP3F", "MOD5E0S", "MOD672G", "MOD9PBH", "MOD9UKK", "MOD5D1A", "MODQBFX", "MODEO6D", "MOD1MLQ", "MODPPL4", "MODLDKW", "MOD2MTY", "MODCSNJ", "MODNI20", "MODOD5J", "MOD4URX", "MODRCYF", "MOD10AB", "MODERYA", "MOD3YSA", "MODA4Y7", "MODQVJC", "MOD7GDH", "MODOFXG", "MOD61KQ", "MODFFTA", "MODUY9V", "MODX2X9", "MOD886S", "MODSTUG", "MODM9RU", "MOD93TR", "MOD52SQ", "MODFWZA", "MOD3KNX", "MODIJWO", "MOD7FGR", "MODENNN", "MODJ7G8", "MODWG6M", "MODUQCJ", "MOD2CJT", "MOD19X9", "MODL5SJ", "MODAU9Y", "MOD0S9X", "MODI9D2", "MODE1A8", "MOD9FPZ", "MODRD71", "MODTYAH", "MODAKI1", "MOD4WAB", "MODWBAY", "MODOXM9", "MODMNT3", "MODQIHF", "MODXP6G", "MOD5QX8", "MOD9ZSU", "MODDT24", "MODP70F", "MOD7EAG", "MODXTJ4", "MODHM8B", "MODG7UC", "MOD62B8", "MODABQO", "MODHAKO", "MODIHVU", "MOD2QJ1", "MODGY9L", "MOD3TQB", "MOD9114", "MOD7DXZ", "MODKSCW", "MODUZ68", "MOD1SPS", "MODHK6Z", "MODVPP9", "MOD7J4P", "MODNLTS", "MOD8JL3", "MOD589H", "MODK2UK", "MODW50G", "MODNB6V", "MODAK4S", "MODMZEV", "MODRF47", "MOD1RSI", "MODSSLM", "MOD0QDE", "MODZBYN", "MODOEY6", "MODHL0W", "MOD4SVF", "MODIYK6", "MOD58HE", "MOD53GD", "MODGDZG", "MODAS2V", "MODACT2", "MODDVMW", "MODEF6W", "MOD8B1Y", "MODDPV2", "MODRRLJ", "MODOHJG", "MODIEOZ", "MODHZX8", "MODT54W", "MODEO3C", "MODJFW8", "MODKDFO", "MODKXHN", "MODZ30M", "MODNNB2", "MODBMKL", "MODSC7K", "MOD6565", "MODXOOD", "MODCMAE", "MODZNXW", "MODUF70", "MODRVW9", "MODNYE5", "MODA6LD", "MOD6PSZ", "MODWGES", "MOD26DB", "MODG86X", "MODXF3K", "MODN79T", "MOD0ACY", "MODC8W5", "MODHIVD", "MODZF9P", "MOD9CE8", "MODRKK6", "MOD8IWX", "MOD06BC", "MOD0YGE", "MOD5B8M", "MODQBBZ", "MODQOR6", "MODQ1O1", "MODQEKL", "MOD6LIW", "MOD9VCD", "MOD1JTW", "MODO7TK", "MOD8U03", "MODOSQI", "MOD7HRM", "MODBCIY", "MODY633", "MODZTRO", "MODTPGV", "MOD0JX1", "MOD9A45", "MODV57Y", "MODC2QX", "MODKCTM", "MOD9A0Q", "MOD6W7K", "MODXFX2", "MODH8HB", "MODYY2V", "MOD0KJ4", "MODDQ3L", "MOD0OGD", "MODWX26", "MODSKA8", "MODZ6D5", "MODP12G", "MODE8WE", "MODKM8W", "MOD0EP2", "MOD6XIM", "MODXT3S", "MODBPXC", "MOD8P0G", "MODR4G3", "MODA408", "MODR4R5", "MOD83VC", "MODAEH3", "MODD5SR", "MODDO6A", "MOD4PUW", "MODW85O", "MODTVTI", "MOD7TR1", "MODC5LE", "MODKCZ7", "MODMHGG", "MOD8HGD", "MODZNTS", "MODO5M1", "MODWTOG", "MODLJOF", "MODBMWK", "MODNZ9N", "MODS49G", "MODVSWJ", "MOD80GM", "MODY41C", "MODYNXB", "MODVFFN", "MODS3YC", "MOD6DEA", "MOD6PLF", "MODQ2YE", "MODGJER", "MOD7WHI", "MODAG3V", "MODEJW5", "MODDMZ3", "MODX3NO", "MOD0WPD", "MODTD73", "MOD3NFF", "MODM1NZ", "MOD058E", "MODUDIS", "MODNL9X", "MODA2QG", "MODXP41", "MODG5K9", "MODCVUS", "MOD1J99", "MODW0Q5", "MODWDZK", "MODIV35", "MODTY13", "MODDR9T", "MODRI41", "MOD5UG6", "MODLQ42", "MOD26AR", "MOD2BGK", "MOD6DCU", "MODJVM5", "MOD273P", "MOD9H8G", "MOD9Q3I", "MODBHSO", "MODYOOH", "MODBOAZ", "MODRNSL", "MODY4FN", "MODR0QE", "MODB8RE", "MOD4IAS", "MODQXBL", "MODF8I4", "MODCHES", "MODE4PT", "MODV57E", "MODCBGY", "MOD9P9D", "MODK113", "MODFWN6", "MODV60S", "MODWEMH", "MODKSXZ", "MODGX2C", "MODHPV2", "MOD1KEP", "MODAHXU", "MODYUQ8", "MODWAOE", "MODGHCK", "MOD0MN2", "MODA0UG", "MODRVDS", "MODT6MK", "MODCDKW", "MODA446", "MODQDZ5", "MODZCJ7", "MODQO4S", "MODS9MI", "MOD6BIS", "MODM40O", "MODKPD5", "MODWZRS", "MOD6QLV", "MODK6YU", "MODPQV9", "MODIIA5", "MODN6SY", "MOD7E75", "MODLGDD", "MODQTVZ", "MODMRL7", "MODIG45", "MODQUL5", "MODSMYF", "MODZJXU", "MODJONQ", "MODFBW9", "MODQC22", "MODYYAX", "MODUJ67", "MODSTMH", "MODOWOA", "MOD2DRQ", "MODR578", "MODRU42", "MODM8YJ", "MODT94Z", "MODO2S7", "MODO7H3", "MOD62EG", "MOD4WOX", "MOD7F85", "MODFTI6", "MODP146", "MODZL0W", "MOD9OAP", "MODFXHT", "MOD4BT5", "MODGR21", "MODKDM9", "MODBLXE", "MODUDKV", "MOD05FZ", "MODRXZ6", "MODZDJM", "MODGPTN", "MODVQ58", "MOD33ZU", "MODVJ0Z", "MODKLSX", "MODDVUP", "MODMSEU", "MOD1L5K", "MOD7JMS", "MODSBJU", "MOD9603", "MODMJFN", "MODAIFC", "MODHAXL", "MOD9OQ9", "MODI004", "MOD92CP", "MODLC3R", "MODHEXA", "MODLCTY", "MODCB6T", "MODS6E6", "MODGDKA", "MOD2BAN", "MOD2VUU", "MODFQD7", "MODZHBV", "MODL6QQ", "MOD5UQ2", "MODGH5B", "MOD6GKF", "MODASP7", "MODIGNA", "MOD05MF", "MODS7F5", "MODIRYC", "MOD3GZZ", "MODI2GT", "MODO60F", "MODNWZQ", "MODOV0Q", "MODH5MK", "MOD8NFI", "MODX68W", "MODYOXD", "MODT88K", "MODA2MK", "MODTM0R", "MODTN8R", "MODPQK7", "MOD03QK", "MODN32Q", "MOD1TZL", "MOD35L7", "MODUZPS", "MODANDI", "MOD5RHO", "MOD5THB", "MODEEC3", "MODJERT", "MODHB2X", "MOD8K6C", "MODIOM6", "MODCUKQ", "MOD5EAY", "MODSM3C", "MODF3WH", "MODWIEY", "MODSJ0I", "MODEASE", "MODJPFI", "MOD485F", "MODI08X", "MODCCU0", "MODXJU6", "MODTJW6", "MODDJQC", "MODIE6G", "MODHI9L", "MOD0YOY", "MODX7RB", "MODGX1D", "MODKA84", "MOD64HD", "MOD01P8", "MOD6IA5", "MODD7H2", "MODQEUS", "MOD836Q", "MODWHVZ", "MODHJ9I", "MODQGOG", "MOD3WDU", "MOD2TDT", "MOD9H93", "MOD8ES6", "MODZ6M8", "MODMH3P", "MODY477", "MOD2WYJ", "MOD4CQ6", "MODAVDL", "MODPAF5", "MODAQWV", "MODA6XC", "MODD4VG", "MODGMUY", "MODW0S2", "MODKSYC", "MODJEOU", "MODLHXJ", "MODHJM9", "MOD43VH", "MODMPHT", "MODCR9E", "MODG6D3", "MODIVJU", "MOD4GDS", "MODIVKG", "MODC832", "MOD7Y48", "MODSULP", "MODWXMG", "MODGNU0", "MODGZ5C", "MOD8IY1", "MOD0S37", "MODL6M6", "MODF8DA", "MODZZL1", "MODBE7F", "MOD130B", "MODRBRB", "MODHRQQ", "MODRUWM", "MODE3TH", "MODRA7F", "MOD7RMH", "MODUFVA", "MODCRNA", "MOD6EXM", "MOD1MEP", "MODEGO8", "MOD4JQQ", "MOD6QGB", "MODWX9K", "MODLYHY", "MODQ95O", "MODUWVL", "MODZOMH", "MODK1UA", "MODCQSQ", "MODYXVH", "MODAYWO", "MOD2ZSH", "MODWDKD", "MODZF60", "MODVM1F", "MODDX4G", "MODEFF2", "MODVENS", "MODYEPQ", "MODYG0G", "MODFXUC", "MOD5VPS", "MOD67Q5", "MODGV5M", "MODIX5Z", "MODNPMK", "MODFRC6", "MODOU4M", "MOD3TDZ", "MODTR5S", "MODYQDI", "MODFFSP", "MODEBM2", "MOD8OVQ", "MODQMBQ", "MODDMX0", "MOD52Y4", "MODIYR6", "MODSSOS", "MODGH0U", "MODIW5F", "MOD26NV", "MODRMM3", "MOD1TWX", "MODDM7D", "MOD7HDQ", "MOD1DH8", "MOD6STH", "MOD5K0S", "MODV41V", "MODZ69T", "MOD860I", "MODXLKW", "MODL5QM", "MODHTYO", "MODFWMS", "MODXYKO", "MODKHXY", "MODMABX", "MODE5U4", "MOD6I6Q", "MODS9A3", "MODOS2C", "MODF2D1", "MODUNVI", "MODCWGQ", "MOD4RLX", "MODPBI8", "MODZZ30", "MODZVL2", "MOD8R68", "MODSLMV", "MODQ018", "MODL7TP", "MOD6WAY", "MODX9B0", "MOD3CEZ", "MOD0922", "MOD0UBM", "MODSWOU", "MODD97Z", "MOD8Z4M", "MOD2YLQ", "MODO3AC", "MODN29D", "MODAI4J", "MODF0B5", "MOD2VFP", "MOD1WTE", "MODBS7N", "MODLPZQ", "MOD5X6E", "MODVC2W", "MODP702", "MODYZEQ", "MODVDAQ", "MODCU3L", "MOD7O79", "MODJKRD", "MODWFWR", "MODM4MB", "MODLWD3", "MODFLXG", "MODTUBT", "MOD7XGC", "MODAXCX", "MODVFPK", "MOD3FKX", "MODRBEV", "MODTL0X", "MODLG75", "MOD9CWY", "MODP0NR", "MODAW2N", "MODJNZR", "MODB5U7", "MODOQCK", "MODRBUD", "MODM34S", "MODPQFH", "MODALYV", "MODQ4IN", "MOD7WQU", "MOD3KHH", "MODX56O", "MODCJY2", "MODWJXA", "MOD9V12", "MOD4IER", "MOD21O8", "MODE1BK", "MODRBKU", "MOD8XLC", "MODY4J9", "MODA2WP", "MODICRH", "MOD87H2", "MODZ4GP", "MODZWVZ", "MOD0SKV", "MODV4C6", "MODOBRC", "MODZQQU", "MODMLAA", "MOD066Z", "MOD48A6", "MODCJR7", "MODC1G1", "MODKGQ2", "MODP4XZ", "MOD4PA7", "MODAWXA", "MODQWVF", "MOD8SUH", "MODAOZI", "MODJKBT", "MOD780Q", "MOD4HEO", "MODEAGX", "MODK0BG", "MODA84L", "MODMLQF", "MOD66Q9", "MODRX7C", "MODQNT1", "MOD0QGM", "MODHROW", "MODHM8L", "MODMF2R", "MODG92R", "MODT785", "MODJ45P", "MODG6T6", "MODRWPL", "MODAV9D", "MODLDYI", "MODB30F", "MODSRRP", "MOD91UZ", "MODXXXM", "MOD4N3L", "MODFL2A", "MOD3OGX", "MODRD1Y", "MODJI2P", "MODWHVQ", "MODCM3J", "MOD2VC4", "MODVEOJ", "MOD0M9U", "MODI51U", "MODNSVC", "MODHF4B", "MOD8IXF", "MODVJLB", "MOD2XB4", "MODJHY7", "MODP4AR", "MODII7O", "MODDE0P", "MODWA4R", "MODO1YH", "MOD4AXM", "MOD0QS1", "MODFVN1", "MODDFDU", "MOD9GAU", "MOD9MCE", "MODXJKZ", "MOD5PXL", "MOD45VN", "MODF4W5", "MODVHOY", "MODYFPS", "MODLABO", "MODYPFI", "MODWAYR", "MOD29JO", "MODPBHL", "MODTO0T", "MODJJUN", "MODR20C", "MODWIMG", "MODEYNF", "MODNLCS", "MODDVYU", "MODI3P7", "MODAC39", "MOD6YSX", "MODD1F3", "MOD9WK3", "MODIIN2", "MODIQJP", "MOD563O", "MODS64J", "MOD02DT", "MOD71GD", "MODGXKB", "MODGDR0", "MOD38J0", "MODNLCY", "MODT19K", "MOD85XL", "MODVQX2", "MODMFJ4", "MODZXIA", "MODHESP", "MODO5J6", "MOD5PN5", "MODMWBY", "MOD1LB0", "MODSD0K", "MOD5P3R", "MODUSI4", "MODK850", "MODLZQA", "MODDA1X", "MODMFOU", "MODY7EU", "MOD82WZ", "MODOFVJ", "MODW3WL", "MODZGZ4", "MODCA5G", "MODD4WP", "MODFGQI", "MODQ3ZA", "MODNM8J", "MOD1A4N", "MOD0ROE", "MODMYCM", "MODGJB0", "MODV30B", "MODU2QP", "MODS451", "MOD0UMX", "MODAN5W", "MODB5ND", "MOD0Z71", "MODZF6S", "MODGTSP", "MODDERP", "MODYXH4", "MODIOST", "MOD1DZW", "MODEIRK", "MODM9DZ", "MODCGWZ", "MODKYOM", "MODHPWQ", "MODY31T", "MODU2GK", "MODY6Q2", "MODHRV3", "MODJU5N", "MODQAVV", "MODW1AA", "MODE38E", "MODVQ5G", "MODIBD9", "MODXFSQ", "MODA57W", "MOD4B39", "MODFRG1", "MODQ43Y", "MOD9KEI", "MOD5XVS", "MODGVXH", "MODX0CO", "MOD9FBT", "MODAF3J", "MOD7R4H", "MODBXA9", "MOD6818", "MODMI8P", "MODG1MA", "MODUD8U", "MODC49I", "MOD3SOC", "MODLTUQ", "MODCJSQ", "MODTF2B", "MODX4ZN", "MODPFYN", "MODPGOQ", "MODCN0B", "MOD3PCX", "MODPQ92", "MOD51EN", "MODJY84", "MODCBAB", "MOD8TB9", "MODSR13", "MOD2H1I", "MOD43N3", "MOD2WDB", "MODZM0W", "MOD7SFS", "MODCFGX", "MODLL88", "MOD349M", "MOD70FR", "MODO5OD", "MODFA67", "MODK9W8", "MODZKLM", "MODJQ3G", "MOD1QHB", "MODYY4P", "MODV95F", "MODAUCA", "MODL7WA", "MODZ0JJ", "MODDTSZ", "MODCJY8", "MODBT3M", "MODWRPE", "MODGA92", "MODHRT0", "MODIUSZ", "MODD8IB", "MODXUL1", "MOD1PHE", "MODR1RJ", "MODWVTK", "MODDNYA", "MODOBK5", "MODHPN2", "MODUVON", "MODK06D", "MODRERX", "MODA292", "MODB5EH", "MOD11CR", "MODLH2W", "MODIPEX", "MODGQAL", "MODPH0D", "MOD9T3H", "MODEYPW", "MODSWNP", "MODBF3B", "MODL0HG", "MODIUNT", "MODFRUQ", "MODSNZN", "MOD1PNH", "MODSJCG", "MOD84X5", "MODG9NZ", "MOD2PDW", "MODO7D8", "MODN6BG", "MODS94Z", "MOD9KYT", "MODGSNK", "MODGOXK", "MOD3FPY", "MOD90A5", "MOD5MKX", "MODQ1GY", "MODFX3J", "MOD68Z2", "MOD2NFL", "MOD901Z", "MOD4OIZ", "MODNJWF", "MODQK6B", "MODHA77", "MODBUH3", "MODHLWM", "MODX4TW", "MOD2ZRX", "MODULZO", "MOD2BG3", "MODEIED", "MODOZJA", "MODOYD3", "MODHF63", "MODLPPG", "MODC718", "MOD1V87", "MODR5UG", "MODMUK8", "MOD9QLK", "MODQJIE", "MODJHQH", "MODVH7M", "MOD55DG", "MODFAPB", "MODYDF1", "MOD715M", "MOD7GVZ", "MODTPD5", "MODSQVZ", "MODCI6S", "MODTF1K", "MODOO2T", "MODVT7W", "MOD1614", "MODZYJI", "MOD3BJH", "MODXUTP", "MODM9FV", "MODDOJ5", "MODY1HK", "MODH2CM", "MODR1T1", "MODT8EG", "MODWZO4", "MODRIWI", "MOD8P0X", "MOD53N8", "MODDDV0", "MODV8IM", "MODZ597", "MOD4YAL", "MODGY89", "MODRXSZ", "MOD8Q8E", "MODAW0J", "MOD9E9L", "MODBUC9", "MODRGZC", "MODW1NX", "MODZ0JZ", "MODRJL9", "MODL4C0", "MODQLU3", "MODY3YR", "MODIN1Q", "MODB1P4", "MODSUSL", "MOD66OI", "MODZMJ8", "MODY1RP", "MODKQUO", "MOD7V6E", "MODLELV", "MODUA5H", "MODJNI6", "MODU1BB", "MODSWCJ", "MODEHGB", "MODJKZ2", "MODOO24", "MOD4TSV", "MODZYBM", "MODXWNV", "MODDXZB", "MODTV7B", "MODWO2K", "MOD4SH9", "MODJK79", "MODAR3Y", "MODSDAC", "MODR966", "MODQSQY", "MOD9T4U", "MODQP0S", "MOD56YJ", "MOD4DUH", "MODTAT2", "MODB0M8", "MODOFXK", "MODLL11", "MODZ59O", "MODJJ6L", "MODO73K", "MODR7DH", "MODQ4D2", "MODQT01", "MODHT2S", "MOD8P8K", "MODA65Z", "MODZLUF", "MODFU7G", "MOD5508", "MODYGSX", "MODCKMT", "MODCUMT", "MOD9T42", "MODODKU", "MOD7WME", "MODNNY5", "MODAAUQ", "MODG3M1", "MODTB9K", "MOD50DB", "MODVM6N", "MODNOL9", "MODB7UP", "MOD97ED", "MODJXCE", "MODZ02D", "MODL8WP", "MODW9BF", "MODCL2I", "MODX7RR", "MOD3AU0", "MODBM6J", "MODG3N9", "MODUHB6", "MODVDKV", "MODI7PX", "MOD9UWU", "MODOCOP", "MOD6EXB", "MODQ9NL", "MODOEP1", "MODRLOQ", "MODSDLB", "MODV36P", "MODW6OW", "MOD8L6S", "MODAFR7", "MODK852", "MOD5PWV", "MODTLKG", "MODLLX8", "MOD2QST", "MODBCUF", "MOD7BR5", "MODID4C", "MOD1PUZ", "MODAHMT", "MODHQ5K", "MOD8ADM", "MOD25QA", "MODVUE4", "MODB3F1", "MODP7QA", "MOD787A", "MODRY8T", "MODXF2N", "MODGJSN", "MODY8WS", "MOD28HW", "MODZLK9", "MOD7DZU", "MODTSA8", "MODB7N1", "MODKKXX", "MODM5MC", "MODYBEC", "MOD3S0Y", "MODYMRD", "MOD3U91", "MOD1U08", "MODDGQF", "MOD7JED", "MODZ9L5", "MODIXW6", "MOD4YB4", "MODAOS6", "MODTLSY", "MOD2YKN", "MODVTTF", "MODKNZZ", "MOD0UNC", "MODHKHG", "MODSJTT", "MODJBPZ", "MOD5JZD", "MODCPI9", "MODJOC8", "MODJIDX", "MODVDOM", "MODYZE2", "MODZ1XH", "MODM0BU", "MOD79SD", "MOD4FGE", "MODJO0L", "MODSXWZ", "MODM7K7", "MODTH6Y", "MOD9Z5U", "MODEKRB", "MODYACW", "MODCHXS", "MODCERP", "MODIYK3", "MODSE4R", "MODN9YV", "MODC03X", "MODV409", "MODLLDW", "MODDSER", "MOD33VB", "MODV8AI", "MODF7DW", "MODYMF6", "MODFUX7", "MODRL8Y", "MOD4GB8", "MODPDR2", "MODPCGJ", "MOD22YJ", "MODOLLE", "MOD604G", "MOD1XIZ", "MODRCTN", "MODPN7J", "MOD8RE6", "MODJXB3", "MOD35WA", "MODVB38", "MOD1TIK", "MODQGYR", "MODP6F8", "MODBUKD", "MODR0C3", "MOD54FA", "MODUOXX", "MOD1C6V", "MODK71O", "MODXFIU", "MODQU0T", "MODNJ36", "MODE1CF", "MODZF2W", "MODMQ2D", "MOD1K6P", "MODTO70", "MODGRR8", "MODKTBA", "MOD89GA", "MODEZ6T", "MOD2ON2", "MODM1D0", "MODY3LS", "MODSM6W", "MODGSPT", "MODOAEN", "MOD8OAD", "MODLS5N", "MODPDNM", "MODNXN9", "MODPW9E", "MOD24GG", "MODZR61", "MODNJRM", "MOD09UY", "MODG5H9", "MODSG7Q", "MODKHO5", "MODBJ8P", "MODM3E0", "MODJAMP", "MOD1EEI", "MODECFZ", "MOD6TO2", "MODECP9", "MOD4I13", "MODH0GB", "MODYIKV", "MOD0Q9A", "MODDS5O", "MODKKTH", "MODXHTM", "MOD5VI2", "MODSVTC", "MODF2QF", "MOD8A44", "MODJF7V", "MODBSSO", "MOD1BZ0", "MODZ8MW", "MODI4F3", "MOD49SA", "MODM1KW", "MODKAR6", "MODAFU8", "MODSADQ", "MODMB5W", "MODR61D", "MOD7NTB", "MOD6V1F", "MODT8MJ", "MODDK9F", "MOD3UNK", "MODR7E0", "MODHL9C", "MODGFDG", "MODYE4S", "MODYH3G", "MOD3IZS", "MOD6XML", "MODPLAD", "MOD2EZU", "MOD8GTP", "MODH40O", "MODR479", "MODKHW8", "MOD16J5", "MOD5FHH", "MOD8PQY", "MODRD5F", "MODNAAT", "MODM2N3", "MOD0EAY", "MOD7B8O", "MOD3SI8", "MODJ6XD", "MODX9PO", "MODDW22", "MODWGE8", "MOD3G3T", "MODSR75", "MODDSLS", "MODDRZ5", "MODB1BL", "MODSHQ1", "MODQLQY", "MODYL2R", "MOD8NB7", "MODYY9F", "MODP58E", "MODQS0E", "MODIJ1L", "MODRQ7E", "MODMPK9", "MOD5RHJ", "MODFEPE", "MOD18KM", "MODWW3O", "MODDCLK", "MODRFKI", "MOD0PKG", "MOD58RC", "MODD724", "MOD7WNR", "MODBTPZ", "MODZEHD", "MODQMV0", "MODIJXB", "MOD5J1E", "MOD0C7R", "MODW4UE", "MODGKJ7", "MODB4DM", "MODWF8D", "MOD5PTY", "MODN6Q6", "MODWUHZ", "MODKMMF", "MODQ6L1", "MODIOYK", "MODZ7MD", "MOD39SO", "MODDAPK", "MODHQXK", "MODIJV6", "MOD2CMX", "MOD0VAI", "MODOBQ1", "MODWSIM", "MODRCVF", "MODQDYR", "MOD9ITS", "MODXRNZ", "MODX8AI", "MODV1G8", "MODX9W0", "MODKLZW", "MOD424V", "MODT2UF", "MODJ9TU", "MODC17R", "MODUQ8F", "MOD9PFU", "MODV43Q", "MODSEZ4", "MODOLBC", "MOD7DRW", "MODRHOP", "MOD4517", "MODLVPY", "MODU7OF", "MODFNFE", "MOD47QW", "MOD7265", "MODZKOQ", "MODYET6", "MODGI47", "MODJCL8", "MODHMTA", "MOD1WBN", "MOD0O6D", "MODMXA2", "MODEOR4", "MODZXO1", "MODZLIZ", "MODNM22", "MODCU1Q", "MODFCNV", "MOD1UF3", "MODV1SH", "MODBWX8", "MOD0831", "MODBL5B", "MODZMQV", "MOD9Y63", "MODV013", "MODO5QE", "MODTR8Q", "MODNDMW", "MOD8PN4", "MODNPFA", "MODU0TW", "MODPOOW", "MODCZQR", "MODN1PB", "MODDSQK", "MODCYMS", "MODVJ7P", "MODA8UL", "MOD0BPV", "MODWPBB", "MOD9EPO", "MOD23R3", "MODY9YN", "MODX4QY", "MODLFJ3", "MOD13ZY", "MOD9VQN", "MODG2S7", "MODIM1R", "MODHOQJ", "MODKKT3", "MOD25CB", "MODXABZ", "MODOVOP", "MODUQ9G", "MODALRQ", "MOD87XT", "MODZB7X", "MODOKYB", "MOD5EOK", "MODHG7L", "MODIQC9", "MODUIMA", "MODL5R2", "MOD6P3Z", "MODKEW9", "MODBQED", "MOD4RBI", "MODVWH9", "MODKVOR", "MODOLLM", "MODHWF2", "MODRDCF", "MODRI8S", "MODMIEK", "MODLRFG", "MODGWY8", "MODHQV6", "MODKSD7", "MODNM5C", "MODHOTH", "MODSE8O", "MODRM1P", "MOD2ZPU", "MOD2RZ5", "MODZH3W", "MODZUTD", "MODA0JB", "MODHZJV", "MODP7EV", "MODEA7I", "MODJ0KU", "MOD5IK8", "MODJVCG", "MODQFNP", "MODWXSN", "MODUBEQ", "MODIFJK", "MODGTO2", "MOD280S", "MODPISE", "MODZ4K3", "MOD3D21", "MODNH6X", "MOD0VQW", "MODEF1F", "MODR6EV", "MODJCMO", "MOD8AVC", "MODDXTV", "MODUIBT", "MODL9ZQ", "MOD0K60", "MODBU9C", "MODOCHD", "MODTP7X", "MODYZEG", "MODOJOU", "MODG26H", "MOD89YP", "MODJJMV", "MODE33B", "MODJQVF", "MOD7Z9K", "MODEFSU", "MODGJ3P", "MODYNIR", "MOD5NS6", "MODGCEI", "MODOY8J", "MODFMRA", "MOD4B80", "MOD477A", "MOD8RS4", "MODTAE9", "MODNAP9", "MODULFQ", "MOD594L", "MOD56JP", "MODQXIL", "MOD100O", "MODYC0H", "MOD4Y3W", "MODXYK5", "MODS9WD", "MODHD07", "MOD80UM", "MOD2FBC", "MODIGH4", "MODC9XJ", "MODIA6M", "MODYSTU", "MODYLKF", "MOD247B", "MODPV53", "MODHT85", "MODH2YU", "MODM3D3", "MODHAXO", "MOD2DQQ", "MOD3IOE", "MOD8OH5", "MOD15DR", "MODA3G1", "MOD42AH", "MOD8AFI", "MODWK1G", "MOD3CP8", "MODSP5M", "MODQAIP", "MODQJRU", "MODGJJH", "MODGCX0", "MOD566X", "MODY76M", "MODYVTC", "MOD5UAS", "MODNEI0", "MODIH2J", "MOD3VNZ", "MODXU9X", "MODLSDJ", "MOD0720", "MODCUGL", "MODXQNG", "MODEPOK", "MODOYAE", "MODEW4V", "MODK4JX", "MODQL2R", "MOD13U0", "MODVFGQ", "MOD4SD1", "MODI0IP", "MODMA8P", "MODYEWL", "MODD0LZ", "MODNYJV", "MOD40H5", "MODF211", "MOD1SPK", "MOD5S26", "MODT0HB", "MODGBBU", "MODFL3U");
		
		foreach($codes as $code) {
			$query = "UPDATE isc_coupons SET couponappliesto = 'categories' WHERE couponname = '".$code."'";
			if(!$GLOBALS['ISC_CLASS_DB']->Query($query)) {
				print "Fucked up on: " . $code . "<br/>";
			}
		}
	}
}

include(dirname(__FILE__)."/init.php");
$GLOBALS['ISC_CLASS_SURVEY'] = new SURVEY_CODES();
$GLOBALS['ISC_CLASS_SURVEY']->fixShit();
?>
